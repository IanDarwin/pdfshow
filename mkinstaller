#!/bin/sh

set -x

RELEASE_VERSION=0.0.7

mvn package assembly:single

case $(uname) in
	MSYS_NT-10*)	inst_format=msi
			icon_format=ico
			OS_SPECIFIC="--win-menu --win-shortcut"
			;;
	Darwin)		inst_format=pkg,img
			icon_format=icns
			;;
	Linux)		inst_format=rpm,deb
			icon_format=png
			;;
	*)
			echo "Don't know how to package for this OS, sorry.";
			exit 1;
esac

jpackage \
	--name PDFShow \
	--app-version ${RELEASE_VERSION} \
	--license-file LICENSE.txt \
	--vendor "Rejminet Group Inc." \
	--type "${inst_format}" \
	--icon src/main/resources/images/logo.${icon_format} \
	--input target \
	--main-jar pdfshow-1.0.0-SNAPSHOT-jar-with-dependencies.jar \
	${OS_SPECIFIC}
exit
	# The following are not used in production releases
	# Omit file-association because most OSes only allow one active program per file type.
	# See https://github.com/IanDarwin/pdfshow/issues/19 Issue #19
	--file-associations install-aux/pdfassoc.properties \
